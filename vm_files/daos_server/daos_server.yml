## DAOS server configuration file.
name: daos_server
access_points: ${DAOS_AZ_CFG_AP}
port: 10001

transport_config:
  allow_insecure: ${DAOS_AZ_CFG_ALLOW_INSECURE}
  client_cert_dir: /etc/daos/certs/clients
  ca_cert: /etc/daos/certs/daosCA.crt
  cert: /etc/daos/certs/server.crt
  key: /etc/daos/certs/server.key

provider: ofi+tcp;ofi_rxm
crt_timeout: 60

disable_vfio: true
disable_vmd: true

nr_hugepages: ${DAOS_AZ_CFG_NR_HUGEPAGES}

control_log_file: /var/daos/daos_server.log
helper_log_file: /var/daos/daos_server_helper.log
firmware_helper_log_file: /var/daos/daos_firmware_helper.log
telemetry_port: 9191

engines:
-
  targets: ${DAOS_AZ_CFG_TARGETS}
  nr_xs_helpers: ${DAOS_AZ_CFG_NR_XS_HELPERS}
  pinned_numa_node: 0
  bypass_health_chk: true
  fabric_iface: eth0
  fabric_iface_port: 31416
  log_mask: ${DAOS_AZ_CFG_CONTROL_LOG_MASK}
  log_file: /var/daos/daos_engine.0.log
  env_vars:
    - FI_OFI_RXM_DEF_TCP_WAIT_OBJ=pollfd
    - DTX_AGG_THD_CNT=16777216
    - DTX_AGG_THD_AGE=700
    - FI_SOCKETS_MAX_CONN_RETRY=1
    - FI_SOCKETS_CONN_TIMEOUT=2000

  storage:
  -
    scm_mount: /var/daos/ram
    class: ram
    scm_size: ${DAOS_AZ_CFG_SCM_SIZE_GB}
  -
    class: nvme
    bdev_list: ${DAOS_AZ_CFG_BDEV}
