# Environment file for the daos_servers_deploy.sh script
# Copy this file to bin/daos_servers_deploy.env
# Then run bin/daos_servers_deploy.sh
# When daos_servers_deploy.sh detects a daos_servers_deploy.env file
# in the same directory it will source that file and use the variable
# values from that file instead of the defaults.

export DAOS_AZ_RESOURCE_PREFIX=""
export DAOS_AZ_RG_DEPLOYMENT_NAME="daos-cluster"
export DAOS_AZ_RG_NAME="$(az config get defaults.group -o tsv --only-show-errors | awk '{print $3}')"
export DAOS_AZ_ARM_SRC_TEMPLATE="azuredeploy_server_template.json"
export DAOS_AZ_ARM_DEST_TEMPLATE="azuredeploy_server.json"
export DAOS_AZ_IMAGE_PREFIX="azure-daos-alma8"
export DAOS_AZ_ADMIN_RSA_PUBLIC_KEY_FILE="${HOME}/.ssh/id_rsa.pub" # Don't need to set if you set DAOS_AZ_ADMIN_RSA_PUBLIC_KEY_DATA
export DAOS_AZ_ADMIN_RSA_PUBLIC_KEY_DATA="$(cat "${DAOS_AZ_ADMIN_RSA_PUBLIC_KEY_FILE}")"
export DAOS_VM_BASE_NAME="daos-server"

# Arm Template Parameter Values
export DAOS_AZ_resourcePrefix="${DAOS_AZ_RESOURCE_PREFIX}"
export DAOS_AZ_existingVnetResourceGroupName="${DAOS_AZ_RG_NAME}"
export DAOS_AZ_existingVnetName="<your vnet name>"
export DAOS_AZ_existingSubnetName="<your subnet name>"
export DAOS_AZ_daosAdminSku="Standard_L8s_v3"
export DAOS_AZ_daosAdminImageName="$(az image list -g "${DAOS_AZ_RG_NAME}" -o tsv | grep "azure-daos-alma8" | awk '{print $5}' | sort | tail -1)"
export DAOS_AZ_daosServerImageName="${DAOS_AZ_daosAdminImageName}" # Server and Admin use same image
export DAOS_AZ_daosServerSku="Standard_L8s_v3"
export DAOS_AZ_adminUser="daos_admin"
export DAOS_AZ_serverCount=3
export DAOS_AZ_serverNumDisks=8
export DAOS_AZ_serverDiskSize=512
export DAOS_AZ_serverStorageSku="Premium_LRS"
export DAOS_AZ_useAvailabilityZone="true"
export DAOS_AZ_availabilityZone=1
